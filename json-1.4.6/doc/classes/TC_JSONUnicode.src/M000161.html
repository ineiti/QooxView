<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
  <title>test_unicode (TC_JSONUnicode)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre><span class="ruby-comment cmt"># File tests/test_json_unicode.rb, line 14</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unicode</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;&quot;'</span>, <span class="ruby-value str">''</span>.<span class="ruby-identifier">to_json</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;\\b&quot;'</span>, <span class="ruby-value str">&quot;\b&quot;</span>.<span class="ruby-identifier">to_json</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;\u0001&quot;'</span>, <span class="ruby-value">0x1</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_json</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;\u001f&quot;'</span>, <span class="ruby-value">0x1f</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_json</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot; &quot;'</span>, <span class="ruby-value str">' '</span>.<span class="ruby-identifier">to_json</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;\&quot;#{0x7f.chr}\&quot;&quot;</span>, <span class="ruby-value">0x7f</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">to_json</span>
    <span class="ruby-identifier">utf8</span> = [ <span class="ruby-value str">&quot;© ≠ €! \01&quot;</span> ]
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">'[&quot;© ≠ €! \u0001&quot;]'</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">'[&quot;\u00a9 \u2260 \u20ac! \u0001&quot;]'</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">utf8</span> = [<span class="ruby-value str">&quot;\343\201\202\343\201\204\343\201\206\343\201\210\343\201\212&quot;</span>]
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">&quot;[\&quot;\343\201\202\343\201\204\343\201\206\343\201\210\343\201\212\&quot;]&quot;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">utf8</span> = [<span class="ruby-value str">&quot;\343\201\202\343\201\204\343\201\206\343\201\210\343\201\212&quot;</span>]
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">&quot;[\&quot;\\u3042\\u3044\\u3046\\u3048\\u304a\&quot;]&quot;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">utf8</span> = [<span class="ruby-value str">'საქართველო'</span>]
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">'[&quot;საქართველო&quot;]'</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">&quot;[\&quot;\\u10e1\\u10d0\\u10e5\\u10d0\\u10e0\\u10d7\\u10d5\\u10d4\\u10da\\u10dd\&quot;]&quot;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-identifier">utf8</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[&quot;Ã&quot;]'</span>, <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">generate</span>([<span class="ruby-value str">&quot;Ã&quot;</span>], <span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[&quot;\\u00c3&quot;]'</span>, <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">generate</span>([<span class="ruby-value str">&quot;Ã&quot;</span>], <span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
    <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;€&quot;</span>], <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'[&quot;\u20ac&quot;]'</span>)
    <span class="ruby-identifier">utf8</span> = [<span class="ruby-value str">&quot;\xf0\xa0\x80\x81&quot;</span>]
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">&quot;[\&quot;\xf0\xa0\x80\x81\&quot;]&quot;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
    <span class="ruby-identifier">json</span> = <span class="ruby-value str">'[&quot;\ud840\udc01&quot;]'</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">json</span>, <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">utf8</span>, <span class="ruby-identifier">:ascii_only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">utf8</span>, <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">json</span>)
  <span class="ruby-keyword kw">end</span></pre>
</body>
</html>